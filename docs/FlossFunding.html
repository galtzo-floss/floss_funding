<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Module: FlossFunding
  
    &mdash; Documentation by YARD 0.9.37
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "FlossFunding";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index (F)</a> &raquo;
    
    
    <span class="title">FlossFunding</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Module: FlossFunding
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/floss_funding/wedge.rb<span class="defines">,<br />
  lib/floss_funding/poke.rb,<br /> lib/floss_funding/config.rb,<br /> lib/floss_funding/silent.rb,<br /> lib/floss_funding/library.rb,<br /> lib/floss_funding/version.rb,<br /> lib/floss_funding/lockfile.rb,<br /> lib/floss_funding/constants.rb,<br /> lib/floss_funding/inclusion.rb,<br /> lib/floss_funding/namespace.rb,<br /> lib/floss_funding/under_bar.rb,<br /> lib/floss_funding/file_finder.rb,<br /> lib/floss_funding/fingerprint.rb,<br /> lib/floss_funding/config_finder.rb,<br /> lib/floss_funding/config_loader.rb,<br /> lib/floss_funding/configuration.rb,<br /> lib/floss_funding/final_summary.rb,<br /> lib/floss_funding/activation_event.rb,<br /> lib/floss_funding/contra_indications.rb,<br /> lib/floss_funding/rakelib/gem_spec_reader.rb,<br /> lib/floss_funding.rb</span>
</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>Now declare some constants</p>


  </div>
</div>
<div class="tags">
  

</div><h2>Defined Under Namespace</h2>
<p class="children">
  
    
      <strong class="modules">Modules:</strong> <span class='object_link'><a href="FlossFunding/Config.html" title="FlossFunding::Config (module)">Config</a></span>, <span class='object_link'><a href="FlossFunding/Constants.html" title="FlossFunding::Constants (module)">Constants</a></span>, <span class='object_link'><a href="FlossFunding/FileFinder.html" title="FlossFunding::FileFinder (module)">FileFinder</a></span>, <span class='object_link'><a href="FlossFunding/Fingerprint.html" title="FlossFunding::Fingerprint (module)">Fingerprint</a></span>, <span class='object_link'><a href="FlossFunding/Lockfile.html" title="FlossFunding::Lockfile (module)">Lockfile</a></span>, <span class='object_link'><a href="FlossFunding/Poke.html" title="FlossFunding::Poke (module)">Poke</a></span>, <span class='object_link'><a href="FlossFunding/Rakelib.html" title="FlossFunding::Rakelib (module)">Rakelib</a></span>, <span class='object_link'><a href="FlossFunding/Silent.html" title="FlossFunding::Silent (module)">Silent</a></span>, <span class='object_link'><a href="FlossFunding/UnderBar.html" title="FlossFunding::UnderBar (module)">UnderBar</a></span>, <span class='object_link'><a href="FlossFunding/Version.html" title="FlossFunding::Version (module)">Version</a></span>
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="FlossFunding/ActivationEvent.html" title="FlossFunding::ActivationEvent (class)">ActivationEvent</a></span>, <span class='object_link'><a href="FlossFunding/AtExitLockfile.html" title="FlossFunding::AtExitLockfile (class)">AtExitLockfile</a></span>, <span class='object_link'><a href="FlossFunding/ConfigFinder.html" title="FlossFunding::ConfigFinder (class)">ConfigFinder</a></span>, <span class='object_link'><a href="FlossFunding/ConfigLoader.html" title="FlossFunding::ConfigLoader (class)">ConfigLoader</a></span>, <span class='object_link'><a href="FlossFunding/ConfigNotFoundError.html" title="FlossFunding::ConfigNotFoundError (class)">ConfigNotFoundError</a></span>, <span class='object_link'><a href="FlossFunding/Configuration.html" title="FlossFunding::Configuration (class)">Configuration</a></span>, <span class='object_link'><a href="FlossFunding/ContraIndications.html" title="FlossFunding::ContraIndications (class)">ContraIndications</a></span>, <span class='object_link'><a href="FlossFunding/Error.html" title="FlossFunding::Error (class)">Error</a></span>, <span class='object_link'><a href="FlossFunding/FinalSummary.html" title="FlossFunding::FinalSummary (class)">FinalSummary</a></span>, <span class='object_link'><a href="FlossFunding/Inclusion.html" title="FlossFunding::Inclusion (class)">Inclusion</a></span>, <span class='object_link'><a href="FlossFunding/Library.html" title="FlossFunding::Library (class)">Library</a></span>, <span class='object_link'><a href="FlossFunding/LockfileBase.html" title="FlossFunding::LockfileBase (class)">LockfileBase</a></span>, <span class='object_link'><a href="FlossFunding/Namespace.html" title="FlossFunding::Namespace (class)">Namespace</a></span>, <span class='object_link'><a href="FlossFunding/OnLoadLockfile.html" title="FlossFunding::OnLoadLockfile (class)">OnLoadLockfile</a></span>, <span class='object_link'><a href="FlossFunding/Wedge.html" title="FlossFunding::Wedge (class)">Wedge</a></span>
    
  
</p>

  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="DEBUG-constant" class="">DEBUG =
          <div class="docstring">
  <div class="discussion">
    <p>Debug toggle controlled by ENV; set true when ENV[‘FLOSS_FUNDING_DEBUG’] case-insensitively equals “true”.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='const'>ENV</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>FLOSS_FUNDING_DEBUG</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_casecmp'>casecmp</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>true</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>==</span> <span class='int'>0</span></pre></dd>
      
        <dt id="CONFIG_FILE_NAME-constant" class="">CONFIG_FILE_NAME =
          <div class="docstring">
  <div class="discussion">
    <p>The file name to look for in the project root.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>.floss_funding.yml</span><span class='tstring_end'>&quot;</span></span></pre></dd>
      
        <dt id="FLOSS_FUNDING_HOME-constant" class="">FLOSS_FUNDING_HOME =
          
        </dt>
        <dd><pre class="code"><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_realpath'>realpath</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_dirname'>dirname</span><span class='lparen'>(</span><span class='kw'>__FILE__</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>..</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rparen'>)</span></pre></dd>
      
        <dt id="REQUIRED_YAML_KEYS-constant" class="">REQUIRED_YAML_KEYS =
          <div class="docstring">
  <div class="discussion">
    <p>Minimum required keys for a valid .floss_funding.yml file<br />
Used to validate presence when integrating without :wedge mode</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='qwords_beg'>%w[</span><span class='tstring_content'>library_name</span><span class='words_sep'> </span><span class='tstring_content'>funding_uri</span><span class='tstring_end'>]</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="FREE_AS_IN_BEER-constant" class="">FREE_AS_IN_BEER =
          <div class="docstring">
  <div class="discussion">
    <p>Unpaid activation option intended for open-source and not-for-profit use.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Free-as-in-beer</span><span class='tstring_end'>&quot;</span></span></pre></dd>
      
        <dt id="BUSINESS_IS_NOT_GOOD_YET-constant" class="">BUSINESS_IS_NOT_GOOD_YET =
          <div class="docstring">
  <div class="discussion">
    <p>Unpaid activation option acknowledging commercial use without payment.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Business-is-not-good-yet</span><span class='tstring_end'>&quot;</span></span></pre></dd>
      
        <dt id="NOT_FINANCIALLY_SUPPORTING-constant" class="">NOT_FINANCIALLY_SUPPORTING =
          <div class="docstring">
  <div class="discussion">
    <p>Activation option to explicitly opt out of funding prompts for a namespace.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Not-financially-supporting</span><span class='tstring_end'>&quot;</span></span></pre></dd>
      
        <dt id="STATES-constant" class="">STATES =
          
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span>
  <span class='symbol'>:activated</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>activated</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='symbol'>:unactivated</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>unactivated</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='symbol'>:invalid</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>invalid</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
<span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="STATE_VALUES-constant" class="">STATE_VALUES =
          
        </dt>
        <dd><pre class="code"><span class='const'><span class='object_link'><a href="#STATES-constant" title="FlossFunding::STATES (constant)">STATES</a></span></span><span class='period'>.</span><span class='id identifier rubyid_values'>values</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="DEFAULT_STATE-constant" class="">DEFAULT_STATE =
          <div class="docstring">
  <div class="discussion">
    <p>The default state is unknown / unactivated until proven otherwise.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='const'><span class='object_link'><a href="#STATES-constant" title="FlossFunding::STATES (constant)">STATES</a></span></span><span class='lbracket'>[</span><span class='symbol'>:unactivated</span><span class='rbracket'>]</span></pre></dd>
      
        <dt id="START_MONTH-constant" class="">START_MONTH =
          <div class="docstring">
  <div class="discussion">
    <p>First month index against which base words are validated.<br />
Do not change once released as it would invalidate existing activation keys.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
        </dt>
        <dd><pre class="code"><span class='const'>Month</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='int'>2025</span><span class='comma'>,</span> <span class='int'>7</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span></pre></dd>
      
        <dt id="BASE_WORDS_PATH-constant" class="">BASE_WORDS_PATH =
          <div class="docstring">
  <div class="discussion">
    <p>Absolute path to the base words list used for paid activation validation.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
        </dt>
        <dd><pre class="code"><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_expand_path'>expand_path</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>../../base.txt</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='kw'>__FILE__</span><span class='rparen'>)</span></pre></dd>
      
        <dt id="EIGHT_BYTES-constant" class="">EIGHT_BYTES =
          <div class="docstring">
  <div class="discussion">
    <p>Number of hex characters required for a paid activation key (64 = 256 bits).</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
        </dt>
        <dd><pre class="code"><span class='int'>64</span></pre></dd>
      
        <dt id="HEX_LICENSE_RULE-constant" class="">HEX_LICENSE_RULE =
          <div class="docstring">
  <div class="discussion">
    <p>Format for a paid activation key (64 hex chars).</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Regexp</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A[0-9a-fA-F]{</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="#EIGHT_BYTES-constant" title="FlossFunding::EIGHT_BYTES (constant)">EIGHT_BYTES</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>}\z</span><span class='regexp_end'>/</span></span></pre></dd>
      
        <dt id="FOOTER-constant" class="">FOOTER =
          <div class="docstring">
  <div class="discussion">
    <p>Footer text appended to messages shown to users when activation is missing<br />
or invalid. Includes gem version and attribution.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
        </dt>
        <dd><pre class="code"><span class='heredoc_beg'>&lt;&lt;-FOOTER</span>
<span class='tstring_content'>=====================================================================================
- Please buy FLOSS &quot;peace-of-mind&quot; activation keys to support open source developers.
floss_funding v</span><span class='embexpr_beg'>#{</span><span class='op'>::</span><span class='const'>FlossFunding</span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FlossFunding/Version.html" title="FlossFunding::Version (module)">Version</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FlossFunding/Version.html#VERSION-constant" title="FlossFunding::Version::VERSION (constant)">VERSION</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'> is made with ❤️ in 🇺🇸 &amp; 🇮🇩 by Galtzo FLOSS (galtzo.com)
</span><span class='heredoc_end'>FOOTER</span></pre></dd>
      
    </dl>
  




  <h2>Class Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#loaded_at-class_method" title="loaded_at (class method)">.<strong>loaded_at</strong>  &#x21d2; Time </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Read the deterministic time source.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_or_update_namespace_with_event-class_method" title="add_or_update_namespace_with_event (class method)">.<strong>add_or_update_namespace_with_event</strong>(namespace, event)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#all_namespaces-class_method" title="all_namespaces (class method)">.<strong>all_namespaces</strong>  &#x21d2; Array&lt;::FlossFunding::Namespace&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>All namespaces that have any activation events recorded Returns array of Namespace objects.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#base_words-class_method" title="base_words (class method)">.<strong>base_words</strong>(num_valid_words = nil)  &#x21d2; Array&lt;String&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Reads the first N lines from the base words file to validate paid activation keys.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#check_activation-class_method" title="check_activation (class method)">.<strong>check_activation</strong>(plain_text)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Check whether a plaintext activation base word is currently valid.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#configuration-class_method" title="configuration (class method)">.<strong>configuration</strong>(namespace)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#configurations-class_method" title="configurations (class method)">.<strong>configurations</strong>(namespace = nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Configuration storage and helpers (derived from namespaces and activation events) When namespace is nil, returns a Hash mapping namespace String =&gt; Array&lt;FlossFunding::Configuration&gt;.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#debug_log-class_method" title="debug_log (class method)">.<strong>debug_log</strong>(*args)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Debug logging helper.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#debug_logger-class_method" title="debug_logger (class method)">.<strong>debug_logger</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Lazily build a Logger instance when FLOSS_CFG_FUNDING_LOGFILE is set and ‘logger’ is available.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#env_var_names-class_method" title="env_var_names (class method)">.<strong>env_var_names</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>ENV var name mapping helpers (derived from namespaces) Returns a Hash mapping namespace String =&gt; ENV variable name String.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#error!-class_method" title="error! (class method)">.<strong>error!</strong>(error, where = nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Mark an internal error, log useful context for diagnostics, and set inert flag.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#errored%3F-class_method" title="errored? (class method)">.<strong>errored?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Global error flag; when set true, library should become inert.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initiate_begging-class_method" title="initiate_begging (class method)">.<strong>initiate_begging</strong>(event)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#install_tasks-class_method" title="install_tasks (class method)">.<strong>install_tasks</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Tasks for both development and test environments.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#namespaces-class_method" title="namespaces (class method)">.<strong>namespaces</strong>  &#x21d2; Hash{String =&gt; ::FlossFunding::Namespace} </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Accessor for namespaces hash: keys are namespace strings, values are Namespace objects.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#namespaces=-class_method" title="namespaces= (class method)">.<strong>namespaces=</strong>(value)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Replace the namespaces hash (expects <code>Hash{String =&gt; ::FlossFunding::Namespace}</code>).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#project_root-class_method" title="project_root (class method)">.<strong>project_root</strong>  &#x21d2; String<sup>?</sup> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Expose the discovered project root (may be nil when running inside this gem’s own repo).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#register_wedge-class_method" title="register_wedge (class method)">.<strong>register_wedge</strong>(base, custom_namespace = nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Register a minimal activation event for wedge-injected libraries to ensure they are counted in the final summary without performing config discovery.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#silenced-class_method" title="silenced (class method)">.<strong>silenced</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Global silenced flag accessor (boolean).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#silenced=-class_method" title="silenced= (class method)">.<strong>silenced=</strong>(value)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Set the global silenced flag.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#start_begging-class_method" title="start_begging (class method)">.<strong>start_begging</strong>(namespace, env_var_name, library_name)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Emit the standard friendly funding message for unactivated usage.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#start_coughing-class_method" title="start_coughing (class method)">.<strong>start_coughing</strong>(activation_key, namespace, env_var_name)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Emit a diagnostic message when an activation key is invalid.</p>
</div></span>
  
</li>

      
    </ul>
  


  <div id="class_attr_details" class="attr_details">
    <h2>Class Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="loaded_at-class_method">
  
    .<strong>loaded_at</strong>  &#x21d2; <tt>Time</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Read the deterministic time source</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Time</tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>@loaded_at</li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


204
205
206</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/floss_funding.rb', line 204</span>

<span class='kw'>def</span> <span class='id identifier rubyid_loaded_at'>loaded_at</span>
  <span class='ivar'>@loaded_at</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="add_or_update_namespace_with_event-class_method">
  
    .<strong>add_or_update_namespace_with_event</strong>(namespace, event)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


345
346
347
348
349
350
351
352
353
354
355
356
357
358</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/floss_funding.rb', line 345</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_or_update_namespace_with_event'>add_or_update_namespace_with_event</span><span class='lparen'>(</span><span class='id identifier rubyid_namespace'>namespace</span><span class='comma'>,</span> <span class='id identifier rubyid_event'>event</span><span class='rparen'>)</span>
  <span class='ivar'>@mutex</span><span class='period'>.</span><span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_ns_obj'>ns_obj</span> <span class='op'>=</span> <span class='id identifier rubyid_namespace'>namespace</span>
    <span class='comment'># Append in place to reduce allocations and avoid extra @mutex churn
</span>    <span class='id identifier rubyid_ns_obj'>ns_obj</span><span class='period'>.</span><span class='id identifier rubyid_activation_events'>activation_events</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_event'>event</span>
    <span class='ivar'>@namespaces</span><span class='lbracket'>[</span><span class='id identifier rubyid_namespace'>namespace</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_ns_obj'>ns_obj</span>
    <span class='kw'>begin</span>
      <span class='id identifier rubyid_lib_name'>lib_name</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_event'>event</span><span class='period'>.</span><span class='id identifier rubyid_library'>library</span> <span class='op'>?</span> <span class='id identifier rubyid_event'>event</span><span class='period'>.</span><span class='id identifier rubyid_library'>library</span><span class='period'>.</span><span class='id identifier rubyid_library_name'>library_name</span> <span class='op'>:</span> <span class='kw'>nil</span><span class='rparen'>)</span>
      <span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="FlossFunding (module)">FlossFunding</a></span></span><span class='period'>.</span><span class='id identifier rubyid_debug_log'><span class='object_link'><a href="#debug_log-class_method" title="FlossFunding.debug_log (method)">debug_log</a></span></span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[registry] add_or_update ns=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_namespace'>namespace</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'> events=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ns_obj'>ns_obj</span><span class='period'>.</span><span class='id identifier rubyid_activation_events'>activation_events</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='embexpr_end'>}</span><span class='tstring_content'> state=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_event'>event</span><span class='period'>.</span><span class='id identifier rubyid_state'>state</span><span class='embexpr_end'>}</span><span class='tstring_content'> lib=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_lib_name'>lib_name</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
    <span class='kw'>rescue</span> <span class='const'>StandardError</span>
      <span class='comment'># ignore log errors
</span>    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="all_namespaces-class_method">
  
    .<strong>all_namespaces</strong>  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="FlossFunding/Namespace.html" title="FlossFunding::Namespace (class)">::FlossFunding::Namespace</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>All namespaces that have any activation events recorded<br />
Returns array of Namespace objects</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="FlossFunding/Namespace.html" title="FlossFunding::Namespace (class)">::FlossFunding::Namespace</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


363
364
365</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/floss_funding.rb', line 363</span>

<span class='kw'>def</span> <span class='id identifier rubyid_all_namespaces'>all_namespaces</span>
  <span class='ivar'>@mutex</span><span class='period'>.</span><span class='id identifier rubyid_synchronize'>synchronize</span> <span class='lbrace'>{</span> <span class='ivar'>@namespaces</span><span class='period'>.</span><span class='id identifier rubyid_values'>values</span><span class='period'>.</span><span class='id identifier rubyid_flatten'>flatten</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="base_words-class_method">
  
    .<strong>base_words</strong>(num_valid_words = nil)  &#x21d2; <tt>Array&lt;String&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Reads the first N lines from the base words file to validate paid activation keys.</p>

<p>Reads base words used to validate paid activation keys.<br />
When called without an argument, uses the current month window to<br />
determine how many words are valid.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>num_valid_words</span>
      
      
        <span class='type'>(<tt>Integer</tt>, <tt>nil</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>number of words to read from the word list</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;String&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the first N words; empty when N is nil or zero</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


402
403
404
405
406
407</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/floss_funding.rb', line 402</span>

<span class='kw'>def</span> <span class='id identifier rubyid_base_words'>base_words</span><span class='lparen'>(</span><span class='id identifier rubyid_num_valid_words'>num_valid_words</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_n'>n</span> <span class='op'>=</span> <span class='id identifier rubyid_num_valid_words'>num_valid_words</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>?</span> <span class='ivar'>@num_valid_words_for_month</span> <span class='op'>:</span> <span class='id identifier rubyid_num_valid_words'>num_valid_words</span>
  <span class='kw'>return</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_n'>n</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_n'>n</span><span class='period'>.</span><span class='id identifier rubyid_zero?'>zero?</span>

  <span class='ivar'>@base_words_all</span><span class='period'>.</span><span class='id identifier rubyid_slice'>slice</span><span class='lparen'>(</span><span class='int'>0</span><span class='comma'>,</span> <span class='id identifier rubyid_n'>n</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="check_activation-class_method">
  
    .<strong>check_activation</strong>(plain_text)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Check whether a plaintext activation base word is currently valid</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>plain_text</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


412
413
414
415
416
417
418
419
420
421
422
423
424
425</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/floss_funding.rb', line 412</span>

<span class='kw'>def</span> <span class='id identifier rubyid_check_activation'>check_activation</span><span class='lparen'>(</span><span class='id identifier rubyid_plain_text'>plain_text</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='ivar'>@num_valid_words_for_month</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='ivar'>@num_valid_words_for_month</span> <span class='op'>&lt;=</span> <span class='int'>0</span>
  <span class='comment'># Cache a Set for fast membership per current n
</span>  <span class='id identifier rubyid_sets'>sets</span> <span class='op'>=</span> <span class='ivar'>@base_words_set_cache</span>
  <span class='id identifier rubyid_set'>set</span> <span class='op'>=</span> <span class='id identifier rubyid_sets'>sets</span><span class='lbracket'>[</span><span class='ivar'>@num_valid_words_for_month</span><span class='rbracket'>]</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_set'>set</span>
    <span class='id identifier rubyid_words'>words</span> <span class='op'>=</span> <span class='id identifier rubyid_base_words'>base_words</span><span class='lparen'>(</span><span class='ivar'>@num_valid_words_for_month</span><span class='rparen'>)</span>
    <span class='comment'># Warning inside a cache-protected lookup means it should only happen once per process, at most.
</span>    <span class='id identifier rubyid_warn'>warn</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[FlossFunding] ZOMG! Base words missing. Did you time travel? Is it </span><span class='embexpr_beg'>#{</span><span class='ivar'>@loaded_month</span><span class='embexpr_end'>}</span><span class='tstring_content'>? Is system clock set in the past?</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_words'>words</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_set'>set</span> <span class='op'>=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_words'>words</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_sets'>sets</span><span class='lbracket'>[</span><span class='ivar'>@num_valid_words_for_month</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_set'>set</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_set'>set</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_plain_text'>plain_text</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="configuration-class_method">
  
    .<strong>configuration</strong>(namespace)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


383
384
385</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/floss_funding.rb', line 383</span>

<span class='kw'>def</span> <span class='id identifier rubyid_configuration'>configuration</span><span class='lparen'>(</span><span class='id identifier rubyid_namespace'>namespace</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_configurations'>configurations</span><span class='lparen'>(</span><span class='id identifier rubyid_namespace'>namespace</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="configurations-class_method">
  
    .<strong>configurations</strong>(namespace = nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Configuration storage and helpers (derived from namespaces and activation events)<br />
When namespace is nil, returns a Hash mapping namespace String =&gt; Array&lt;FlossFunding::Configuration&gt;.<br />
When namespace is provided, returns FlossFunding::Configuration for that namespace (or nil if not found).</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


370
371
372
373
374
375
376
377
378
379
380
381</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/floss_funding.rb', line 370</span>

<span class='kw'>def</span> <span class='id identifier rubyid_configurations'>configurations</span><span class='lparen'>(</span><span class='id identifier rubyid_namespace'>namespace</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='ivar'>@mutex</span><span class='period'>.</span><span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_namespace'>namespace</span>
      <span class='id identifier rubyid_nobj'>nobj</span> <span class='op'>=</span> <span class='ivar'>@namespaces</span><span class='lbracket'>[</span><span class='id identifier rubyid_namespace'>namespace</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_nobj'>nobj</span> <span class='op'>?</span> <span class='id identifier rubyid_nobj'>nobj</span><span class='period'>.</span><span class='id identifier rubyid_merged_config'>merged_config</span> <span class='op'>:</span> <span class='kw'>nil</span>
    <span class='kw'>else</span>
      <span class='ivar'>@namespaces</span><span class='period'>.</span><span class='id identifier rubyid_each_with_object'>each_with_object</span><span class='lparen'>(</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='lparen'>(</span><span class='id identifier rubyid_ns'>ns</span><span class='comma'>,</span> <span class='id identifier rubyid_nobj'>nobj</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_acc'>acc</span><span class='op'>|</span>
        <span class='id identifier rubyid_acc'>acc</span><span class='lbracket'>[</span><span class='id identifier rubyid_ns'>ns</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_nobj'>nobj</span><span class='period'>.</span><span class='id identifier rubyid_configs'>configs</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="debug_log-class_method">
  
    .<strong>debug_log</strong>(*args)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Debug logging helper. Only outputs when FlossFunding::DEBUG is true.<br />
Accepts either a message (or multiple args joined by space) or a block<br />
for lazy construction of the message.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>args</span>
      
      
        <span class='type'>(<tt>Array&lt;Object&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>message parts to join with space</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Yield Returns:</p>
<ul class="yieldreturn">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>optional block returning the message</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/floss_funding.rb', line 223</span>

<span class='kw'>def</span> <span class='id identifier rubyid_debug_log'>debug_log</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="FlossFunding (module)">FlossFunding</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="#DEBUG-constant" title="FlossFunding::DEBUG (constant)">DEBUG</a></span></span>
  <span class='id identifier rubyid_msg'>msg</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
    <span class='kw'>yield</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:to_s</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='comment'># Prefer Logger to file when configured and available; otherwise STDOUT
</span>  <span class='id identifier rubyid_logger'>logger</span> <span class='op'>=</span> <span class='id identifier rubyid_debug_logger'>debug_logger</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_logger'>logger</span>
    <span class='kw'>begin</span>
      <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span><span class='lparen'>(</span><span class='id identifier rubyid_msg'>msg</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>
      <span class='kw'>return</span>
    <span class='kw'>rescue</span> <span class='const'>StandardError</span>
      <span class='comment'># fall back to STDOUT below
</span>    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_puts'>puts</span><span class='lparen'>(</span><span class='id identifier rubyid_msg'>msg</span><span class='rparen'>)</span>
<span class='kw'>rescue</span> <span class='const'>StandardError</span>
  <span class='comment'># Never fail the caller due to logging issues
</span>  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="debug_logger-class_method">
  
    .<strong>debug_logger</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Lazily build a Logger instance when FLOSS_CFG_FUNDING_LOGFILE is set and ‘logger’ is available.<br />
Returns a Logger or nil when unavailable or initialization failed.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/floss_funding.rb', line 271</span>

<span class='kw'>def</span> <span class='id identifier rubyid_debug_logger'>debug_logger</span>
  <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='kw'>begin</span>
    <span class='const'>ENV</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>FLOSS_CFG_FUNDING_LOGFILE</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
  <span class='kw'>rescue</span> <span class='const'>StandardError</span>
    <span class='kw'>nil</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>

  <span class='kw'>begin</span>
    <span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>logger</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>rescue</span> <span class='const'>LoadError</span>
    <span class='kw'>return</span>
  <span class='kw'>rescue</span> <span class='const'>StandardError</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
    <span class='comment'># Log but do not set inert for logger init failures
</span>    <span class='id identifier rubyid_debug_log'>debug_log</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[WARN][debug_logger] </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
    <span class='kw'>return</span>
  <span class='kw'>end</span>

  <span class='ivar'>@mutex</span><span class='period'>.</span><span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='kw'>return</span> <span class='ivar'>@debug_logger</span> <span class='kw'>if</span> <span class='kw'>defined?</span><span class='lparen'>(</span><span class='ivar'>@debug_logger</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@debug_logger</span>

    <span class='comment'># Ensure directory exists; best-effort
</span>    <span class='kw'>begin</span>
      <span class='id identifier rubyid_dir'>dir</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_dirname'>dirname</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
      <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_mkdir_p'>mkdir_p</span><span class='lparen'>(</span><span class='id identifier rubyid_dir'>dir</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_dir'>dir</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_dir'>dir</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span> <span class='op'>||</span> <span class='const'>Dir</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span><span class='lparen'>(</span><span class='id identifier rubyid_dir'>dir</span><span class='rparen'>)</span>
    <span class='kw'>rescue</span> <span class='const'>StandardError</span>
      <span class='comment'># ignore; Logger.new may still succeed if dir already exists or is current dir
</span>    <span class='kw'>end</span>

    <span class='kw'>begin</span>
      <span class='comment'># Truncate the debug log file on first initialization to keep runs readable
</span>      <span class='kw'>begin</span>
        <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>w</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_truncate'>truncate</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
      <span class='kw'>rescue</span> <span class='const'>StandardError</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
        <span class='id identifier rubyid_debug_log'>debug_log</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[WARN][debug_logger] unable to truncate </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
      <span class='kw'>end</span>

      <span class='id identifier rubyid_logger'>logger</span> <span class='op'>=</span> <span class='const'>Logger</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_level'>level</span> <span class='op'>=</span> <span class='const'>Logger</span><span class='op'>::</span><span class='const'>DEBUG</span>
      <span class='comment'># Keep output minimal: message only with newline
</span>      <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_formatter'>formatter</span> <span class='op'>=</span> <span class='id identifier rubyid_proc'>proc</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid__severity'>_severity</span><span class='comma'>,</span> <span class='id identifier rubyid__datetime'>_datetime</span><span class='comma'>,</span> <span class='id identifier rubyid__progname'>_progname</span><span class='comma'>,</span> <span class='id identifier rubyid_message'>message</span><span class='op'>|</span> <span class='lparen'>(</span><span class='id identifier rubyid_message'>message</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_end_with?'>end_with?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id identifier rubyid_message'>message</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>:</span> <span class='id identifier rubyid_message'>message</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='rbrace'>}</span>
      <span class='ivar'>@debug_logger</span> <span class='op'>=</span> <span class='id identifier rubyid_logger'>logger</span>
    <span class='kw'>rescue</span> <span class='const'>StandardError</span>
      <span class='ivar'>@debug_logger</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='kw'>end</span>

    <span class='ivar'>@debug_logger</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="env_var_names-class_method">
  
    .<strong>env_var_names</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>ENV var name mapping helpers (derived from namespaces)<br />
Returns a Hash mapping namespace String =&gt; ENV variable name String</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


389
390
391
392
393</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/floss_funding.rb', line 389</span>

<span class='kw'>def</span> <span class='id identifier rubyid_env_var_names'>env_var_names</span>
  <span class='ivar'>@mutex</span><span class='period'>.</span><span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='ivar'>@namespaces</span><span class='period'>.</span><span class='id identifier rubyid_transform_values'>transform_values</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_nobj'>nobj</span><span class='op'>|</span> <span class='id identifier rubyid_nobj'>nobj</span><span class='period'>.</span><span class='id identifier rubyid_env_var_name'>env_var_name</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="error!-class_method">
  
    .<strong>error!</strong>(error, where = nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Mark an internal error, log useful context for diagnostics, and set inert flag.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>error</span>
      
      
        <span class='type'>(<tt>Exception</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>where</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>nil</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>context label</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


254
255
256
257
258
259
260
261
262
263
264
265
266
267</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/floss_funding.rb', line 254</span>

<span class='kw'>def</span> <span class='id identifier rubyid_error!'>error!</span><span class='lparen'>(</span><span class='id identifier rubyid_error'>error</span><span class='comma'>,</span> <span class='id identifier rubyid_where'>where</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>begin</span>
    <span class='id identifier rubyid_lbl'>lbl</span> <span class='op'>=</span> <span class='id identifier rubyid_where'>where</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[ERROR][</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_where'>where</span><span class='embexpr_end'>}</span><span class='tstring_content'>]</span><span class='tstring_end'>&quot;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[ERROR]</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_msg'>msg</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_lbl'>lbl</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_error'>error</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_error'>error</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_debug_log'>debug_log</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_msg'>msg</span> <span class='rbrace'>}</span>
    <span class='id identifier rubyid_bt'>bt</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_error'>error</span><span class='period'>.</span><span class='id identifier rubyid_backtrace'>backtrace</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>5</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_debug_log'>debug_log</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_lbl'>lbl</span><span class='embexpr_end'>}</span><span class='tstring_content'> backtrace:\n</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_bt'>bt</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span> <span class='kw'>unless</span> <span class='id identifier rubyid_bt'>bt</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
  <span class='kw'>rescue</span> <span class='const'>StandardError</span>
    <span class='comment'># ignore logging failures
</span>  <span class='kw'>ensure</span>
    <span class='ivar'>@mutex</span><span class='period'>.</span><span class='id identifier rubyid_synchronize'>synchronize</span> <span class='lbrace'>{</span> <span class='ivar'>@errored</span> <span class='op'>=</span> <span class='kw'>true</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>
  <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="errored?-class_method">
  
    .<strong>errored?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Global error flag; when set true, library should become inert.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


247
248
249</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/floss_funding.rb', line 247</span>

<span class='kw'>def</span> <span class='id identifier rubyid_errored?'>errored?</span>
  <span class='ivar'>@mutex</span><span class='period'>.</span><span class='id identifier rubyid_synchronize'>synchronize</span> <span class='lbrace'>{</span> <span class='op'>!</span><span class='op'>!</span><span class='ivar'>@errored</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="initiate_begging-class_method">
  
    .<strong>initiate_begging</strong>(event)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488
489
490</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/floss_funding.rb', line 466</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initiate_begging'>initiate_begging</span><span class='lparen'>(</span><span class='id identifier rubyid_event'>event</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_library'>library</span> <span class='op'>=</span> <span class='id identifier rubyid_event'>event</span><span class='period'>.</span><span class='id identifier rubyid_library'>library</span>
  <span class='id identifier rubyid_ns'>ns</span> <span class='op'>=</span> <span class='id identifier rubyid_library'>library</span><span class='period'>.</span><span class='id identifier rubyid_namespace'>namespace</span>
  <span class='id identifier rubyid_env_var_name'>env_var_name</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="FlossFunding (module)">FlossFunding</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FlossFunding/UnderBar.html" title="FlossFunding::UnderBar (module)">UnderBar</a></span></span><span class='period'>.</span><span class='id identifier rubyid_env_variable_name'><span class='object_link'><a href="FlossFunding/UnderBar.html#env_variable_name-class_method" title="FlossFunding::UnderBar.env_variable_name (method)">env_variable_name</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_ns'>ns</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_library_name'>library_name</span> <span class='op'>=</span> <span class='id identifier rubyid_library'>library</span><span class='period'>.</span><span class='id identifier rubyid_library_name'>library_name</span>
  <span class='id identifier rubyid_activation_key'>activation_key</span> <span class='op'>=</span> <span class='id identifier rubyid_event'>event</span><span class='period'>.</span><span class='id identifier rubyid_activation_key'>activation_key</span>

  <span class='comment'># On-load nag sentinel: allow each library to nag at most once per lockfile lifetime
</span>  <span class='id identifier rubyid_lock'>lock</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="FlossFunding (module)">FlossFunding</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FlossFunding/Lockfile.html" title="FlossFunding::Lockfile (module)">Lockfile</a></span></span><span class='period'>.</span><span class='id identifier rubyid_on_load'><span class='object_link'><a href="FlossFunding/Lockfile.html#on_load-class_method" title="FlossFunding::Lockfile.on_load (method)">on_load</a></span></span>

  <span class='kw'>case</span> <span class='id identifier rubyid_event'>event</span><span class='period'>.</span><span class='id identifier rubyid_state'>state</span>
  <span class='kw'>when</span> <span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="FlossFunding (module)">FlossFunding</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="#STATES-constant" title="FlossFunding::STATES (constant)">STATES</a></span></span><span class='lbracket'>[</span><span class='symbol'>:activated</span><span class='rbracket'>]</span>
    <span class='kw'>nil</span>
  <span class='kw'>when</span> <span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="FlossFunding (module)">FlossFunding</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="#STATES-constant" title="FlossFunding::STATES (constant)">STATES</a></span></span><span class='lbracket'>[</span><span class='symbol'>:invalid</span><span class='rbracket'>]</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_lock'>lock</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_lock'>lock</span><span class='period'>.</span><span class='id identifier rubyid_nagged?'>nagged?</span><span class='lparen'>(</span><span class='id identifier rubyid_library'>library</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_lock'>lock</span><span class='period'>.</span><span class='id identifier rubyid_record_nag'>record_nag</span><span class='lparen'>(</span><span class='id identifier rubyid_library'>library</span><span class='comma'>,</span> <span class='id identifier rubyid_event'>event</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>on_load</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_lock'>lock</span>
      <span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="FlossFunding (module)">FlossFunding</a></span></span><span class='period'>.</span><span class='id identifier rubyid_start_coughing'><span class='object_link'><a href="#start_coughing-class_method" title="FlossFunding.start_coughing (method)">start_coughing</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_activation_key'>activation_key</span><span class='comma'>,</span> <span class='id identifier rubyid_ns'>ns</span><span class='comma'>,</span> <span class='id identifier rubyid_env_var_name'>env_var_name</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_lock'>lock</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_lock'>lock</span><span class='period'>.</span><span class='id identifier rubyid_nagged?'>nagged?</span><span class='lparen'>(</span><span class='id identifier rubyid_library'>library</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_lock'>lock</span><span class='period'>.</span><span class='id identifier rubyid_record_nag'>record_nag</span><span class='lparen'>(</span><span class='id identifier rubyid_library'>library</span><span class='comma'>,</span> <span class='id identifier rubyid_event'>event</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>on_load</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_lock'>lock</span>
      <span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="FlossFunding (module)">FlossFunding</a></span></span><span class='period'>.</span><span class='id identifier rubyid_start_begging'><span class='object_link'><a href="#start_begging-class_method" title="FlossFunding.start_begging (method)">start_begging</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_ns'>ns</span><span class='comma'>,</span> <span class='id identifier rubyid_env_var_name'>env_var_name</span><span class='comma'>,</span> <span class='id identifier rubyid_library_name'>library_name</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="install_tasks-class_method">
  
    .<strong>install_tasks</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Tasks for both development and test environments</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


213
214
215</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/floss_funding.rb', line 213</span>

<span class='kw'>def</span> <span class='id identifier rubyid_install_tasks'>install_tasks</span>
  <span class='id identifier rubyid_load'>load</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>floss_funding/tasks.rb</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="namespaces-class_method">
  
    .<strong>namespaces</strong>  &#x21d2; <tt>Hash{String =&gt; <span class='object_link'><a href="FlossFunding/Namespace.html" title="FlossFunding::Namespace (class)">::FlossFunding::Namespace</a></span>}</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Accessor for namespaces hash: keys are namespace strings, values are Namespace objects</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash{String =&gt; <span class='object_link'><a href="FlossFunding/Namespace.html" title="FlossFunding::Namespace (class)">::FlossFunding::Namespace</a></span>}</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


323
324
325</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/floss_funding.rb', line 323</span>

<span class='kw'>def</span> <span class='id identifier rubyid_namespaces'>namespaces</span>
  <span class='ivar'>@mutex</span><span class='period'>.</span><span class='id identifier rubyid_synchronize'>synchronize</span> <span class='lbrace'>{</span> <span class='ivar'>@namespaces</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="namespaces=-class_method">
  
    .<strong>namespaces=</strong>(value)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Replace the namespaces hash (expects <code>Hash{String =&gt; ::FlossFunding::Namespace}</code>)</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


328
329
330</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/floss_funding.rb', line 328</span>

<span class='kw'>def</span> <span class='id identifier rubyid_namespaces='>namespaces=</span><span class='lparen'>(</span><span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>
  <span class='ivar'>@mutex</span><span class='period'>.</span><span class='id identifier rubyid_synchronize'>synchronize</span> <span class='lbrace'>{</span> <span class='ivar'>@namespaces</span> <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="project_root-class_method">
  
    .<strong>project_root</strong>  &#x21d2; <tt>String</tt><sup>?</sup> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Expose the discovered project root (may be nil when running inside this gem’s own repo)</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>, <tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


208
209
210</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/floss_funding.rb', line 208</span>

<span class='kw'>def</span> <span class='id identifier rubyid_project_root'>project_root</span>
  <span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="FlossFunding (module)">FlossFunding</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FlossFunding/ConfigFinder.html" title="FlossFunding::ConfigFinder (class)">ConfigFinder</a></span></span><span class='period'>.</span><span class='id identifier rubyid_project_root'><span class='object_link'><a href="FlossFunding/ConfigFinder.html#project_root-class_method" title="FlossFunding::ConfigFinder.project_root (method)">project_root</a></span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="register_wedge-class_method">
  
    .<strong>register_wedge</strong>(base, custom_namespace = nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Register a minimal activation event for wedge-injected libraries to ensure<br />
they are counted in the final summary without performing config discovery.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>base</span>
      
      
        <span class='type'>(<tt>Module</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the including module</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>custom_namespace</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>nil</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>optional override namespace</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/floss_funding.rb', line 150</span>

<span class='kw'>def</span> <span class='id identifier rubyid_register_wedge'>register_wedge</span><span class='lparen'>(</span><span class='id identifier rubyid_base'>base</span><span class='comma'>,</span> <span class='id identifier rubyid_custom_namespace'>custom_namespace</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='comment'># Derive namespace string
</span>  <span class='id identifier rubyid_ns_name'>ns_name</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_custom_namespace'>custom_namespace</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>String</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_custom_namespace'>custom_namespace</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id identifier rubyid_custom_namespace'>custom_namespace</span> <span class='op'>:</span> <span class='id identifier rubyid_base'>base</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>

  <span class='comment'># Build Namespace (derives activation key/state from ENV)
</span>  <span class='id identifier rubyid_namespace'>namespace</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="FlossFunding (module)">FlossFunding</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FlossFunding/Namespace.html" title="FlossFunding::Namespace (class)">Namespace</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="FlossFunding/Namespace.html#initialize-instance_method" title="FlossFunding::Namespace#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_ns_name'>ns_name</span><span class='comma'>,</span> <span class='id identifier rubyid_base'>base</span><span class='rparen'>)</span>

  <span class='comment'># Derive a library (gem) name from the namespace: underscore segments and downcase
</span>  <span class='comment'># Example: &quot;FlossFunding&quot; =&gt; &quot;floss_funding&quot;; &quot;My::Lib&quot; =&gt; &quot;my_lib&quot;
</span>  <span class='id identifier rubyid_derived_lib_name'>derived_lib_name</span> <span class='op'>=</span> <span class='id identifier rubyid_ns_name'>ns_name</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>::</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_seg'>seg</span><span class='op'>|</span> <span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="FlossFunding (module)">FlossFunding</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FlossFunding/UnderBar.html" title="FlossFunding::UnderBar (module)">UnderBar</a></span></span><span class='period'>.</span><span class='id identifier rubyid_to_under_bar'><span class='object_link'><a href="FlossFunding/UnderBar.html#to_under_bar-class_method" title="FlossFunding::UnderBar.to_under_bar (method)">to_under_bar</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_seg'>seg</span><span class='rparen'>)</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>__</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span>

  <span class='comment'># Minimal configuration: include required keys so downstream consumers have something sensible
</span>  <span class='id identifier rubyid_cfg_hash'>cfg_hash</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>library_name</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>wedge_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_derived_lib_name'>derived_lib_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>funding_uri</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>https://floss-funding.dev</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='rbrace'>}</span>
  <span class='id identifier rubyid_config'>config</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="FlossFunding (module)">FlossFunding</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FlossFunding/Configuration.html" title="FlossFunding::Configuration (class)">Configuration</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="FlossFunding/Configuration.html#initialize-instance_method" title="FlossFunding::Configuration#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_cfg_hash'>cfg_hash</span><span class='rparen'>)</span>

  <span class='comment'># Minimal Library record; many fields are nil or placeholders in wedge mode
</span>  <span class='id identifier rubyid_library'>library</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="FlossFunding (module)">FlossFunding</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FlossFunding/Library.html" title="FlossFunding::Library (class)">Library</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="FlossFunding/Library.html#initialize-instance_method" title="FlossFunding::Library#initialize (method)">new</a></span></span><span class='lparen'>(</span>
    <span class='id identifier rubyid_derived_lib_name'>derived_lib_name</span><span class='comma'>,</span>        <span class='comment'># library_name
</span>    <span class='id identifier rubyid_namespace'>namespace</span><span class='comma'>,</span>               <span class='comment'># ns
</span>    <span class='id identifier rubyid_custom_namespace'>custom_namespace</span><span class='comma'>,</span>        <span class='comment'># custom_ns
</span>    <span class='id identifier rubyid_base'>base</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='comma'>,</span>          <span class='comment'># base_name
</span>    <span class='kw'>nil</span><span class='comma'>,</span>                     <span class='comment'># including_path
</span>    <span class='kw'>nil</span><span class='comma'>,</span>                     <span class='comment'># root_path
</span>    <span class='kw'>nil</span><span class='comma'>,</span>                     <span class='comment'># config_path
</span>    <span class='id identifier rubyid_namespace'>namespace</span><span class='period'>.</span><span class='id identifier rubyid_env_var_name'>env_var_name</span><span class='comma'>,</span>  <span class='comment'># env_var_name
</span>    <span class='id identifier rubyid_config'>config</span><span class='comma'>,</span>                  <span class='comment'># configuration
</span>    <span class='kw'>nil</span><span class='comma'>,</span>                     <span class='comment'># silent
</span>  <span class='rparen'>)</span>

  <span class='comment'># Event with the derived state and key
</span>  <span class='id identifier rubyid_event'>event</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="FlossFunding (module)">FlossFunding</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FlossFunding/ActivationEvent.html" title="FlossFunding::ActivationEvent (class)">ActivationEvent</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="FlossFunding/ActivationEvent.html#initialize-instance_method" title="FlossFunding::ActivationEvent#initialize (method)">new</a></span></span><span class='lparen'>(</span>
    <span class='id identifier rubyid_library'>library</span><span class='comma'>,</span>
    <span class='id identifier rubyid_namespace'>namespace</span><span class='period'>.</span><span class='id identifier rubyid_activation_key'>activation_key</span><span class='comma'>,</span>
    <span class='id identifier rubyid_namespace'>namespace</span><span class='period'>.</span><span class='id identifier rubyid_state'>state</span><span class='comma'>,</span>
    <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='rparen'>)</span>

  <span class='id identifier rubyid_add_or_update_namespace_with_event'>add_or_update_namespace_with_event</span><span class='lparen'>(</span><span class='id identifier rubyid_namespace'>namespace</span><span class='comma'>,</span> <span class='id identifier rubyid_event'>event</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_initiate_begging'>initiate_begging</span><span class='lparen'>(</span><span class='id identifier rubyid_event'>event</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_event'>event</span>
<span class='kw'>rescue</span> <span class='const'>StandardError</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
  <span class='comment'># Never raise; wedge registration is best-effort only
</span>  <span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="FlossFunding (module)">FlossFunding</a></span></span><span class='period'>.</span><span class='id identifier rubyid_error!'><span class='object_link'><a href="#error!-class_method" title="FlossFunding.error! (method)">error!</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_e'>e</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>register_wedge</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="silenced-class_method">
  
    .<strong>silenced</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Global silenced flag accessor (boolean)</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


334
335
336</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/floss_funding.rb', line 334</span>

<span class='kw'>def</span> <span class='id identifier rubyid_silenced'>silenced</span>
  <span class='ivar'>@mutex</span><span class='period'>.</span><span class='id identifier rubyid_synchronize'>synchronize</span> <span class='lbrace'>{</span> <span class='ivar'>@silenced</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="silenced=-class_method">
  
    .<strong>silenced=</strong>(value)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Set the global silenced flag</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>value</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


341
342
343</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/floss_funding.rb', line 341</span>

<span class='kw'>def</span> <span class='id identifier rubyid_silenced='>silenced=</span><span class='lparen'>(</span><span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>
  <span class='ivar'>@mutex</span><span class='period'>.</span><span class='id identifier rubyid_synchronize'>synchronize</span> <span class='lbrace'>{</span> <span class='ivar'>@silenced</span> <span class='op'>=</span> <span class='op'>!</span><span class='op'>!</span><span class='id identifier rubyid_value'>value</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="start_begging-class_method">
  
    .<strong>start_begging</strong>(namespace, env_var_name, library_name)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Emit the standard friendly funding message for unactivated usage</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>namespace</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>env_var_name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>library_name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


461
462
463
464</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/floss_funding.rb', line 461</span>

<span class='kw'>def</span> <span class='id identifier rubyid_start_begging'>start_begging</span><span class='lparen'>(</span><span class='id identifier rubyid_namespace'>namespace</span><span class='comma'>,</span> <span class='id identifier rubyid_env_var_name'>env_var_name</span><span class='comma'>,</span> <span class='id identifier rubyid_library_name'>library_name</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="FlossFunding (module)">FlossFunding</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FlossFunding/ContraIndications.html" title="FlossFunding::ContraIndications (class)">ContraIndications</a></span></span><span class='period'>.</span><span class='id identifier rubyid_at_exit_contraindicated?'><span class='object_link'><a href="FlossFunding/ContraIndications.html#at_exit_contraindicated%3F-class_method" title="FlossFunding::ContraIndications.at_exit_contraindicated? (method)">at_exit_contraindicated?</a></span></span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>%(</span><span class='tstring_content'>FLOSS Funding: Activation key missing for </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_library_name'>library_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_namespace'>namespace</span><span class='embexpr_end'>}</span><span class='tstring_content'>). Set ENV[&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_env_var_name'>env_var_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>&quot;] to your activation key; details will be shown at exit.</span><span class='tstring_end'>)</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="start_coughing-class_method">
  
    .<strong>start_coughing</strong>(activation_key, namespace, env_var_name)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Emit a diagnostic message when an activation key is invalid</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>activation_key</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>namespace</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>env_var_name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/floss_funding.rb', line 432</span>

<span class='kw'>def</span> <span class='id identifier rubyid_start_coughing'>start_coughing</span><span class='lparen'>(</span><span class='id identifier rubyid_activation_key'>activation_key</span><span class='comma'>,</span> <span class='id identifier rubyid_namespace'>namespace</span><span class='comma'>,</span> <span class='id identifier rubyid_env_var_name'>env_var_name</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="FlossFunding (module)">FlossFunding</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FlossFunding/ContraIndications.html" title="FlossFunding::ContraIndications (class)">ContraIndications</a></span></span><span class='period'>.</span><span class='id identifier rubyid_at_exit_contraindicated?'><span class='object_link'><a href="FlossFunding/ContraIndications.html#at_exit_contraindicated%3F-class_method" title="FlossFunding::ContraIndications.at_exit_contraindicated? (method)">at_exit_contraindicated?</a></span></span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='heredoc_beg'>&lt;&lt;-COUGHING</span>
<span class='tstring_content'>==============================================================
COUGH, COUGH.
Ahem, it appears as though you tried to set an activation key
for </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_namespace'>namespace</span><span class='embexpr_end'>}</span><span class='tstring_content'>, but it was invalid.

  Current (Invalid) Activation Key: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_activation_key'>activation_key</span><span class='embexpr_end'>}</span><span class='tstring_content'>
  Namespace: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_namespace'>namespace</span><span class='embexpr_end'>}</span><span class='tstring_content'>
  ENV Variable: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_env_var_name'>env_var_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>

Paid activation keys are 8 bytes, 64 hex characters, long.
Unpaid activation keys have varying lengths, depending on type and namespace.
Yours is </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_activation_key'>activation_key</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span><span class='embexpr_end'>}</span><span class='tstring_content'> characters long, and doesn&#39;t match any paid or unpaid keys.

Please unset the current ENV variable </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_env_var_name'>env_var_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>, since it is invalid.

Then find the correct one, or get a new one @ https://floss-funding.dev and set it.

</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="" title="FlossFunding (module)">FlossFunding</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="#FOOTER-constant" title="FlossFunding::FOOTER (constant)">FOOTER</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>
</span><span class='heredoc_end'>  COUGHING
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Sat Aug 16 07:50:26 2025 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.37 (ruby-3.4.5).
</div>

    </div>
  </body>
</html>