<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: GemMine::Generator
  
    &mdash; Documentation by YARD 0.9.37
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "GemMine::Generator";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (G)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../GemMine.html" title="GemMine (module)">GemMine</a></span></span>
     &raquo; 
    <span class="title">Generator</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: GemMine::Generator
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">GemMine::Generator</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/gem_mine/generator.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>Internal engine for GemMine.factory</p>


  </div>
</div>
<div class="tags">
  

</div><h2>Defined Under Namespace</h2>
<p class="children">
  
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="Generator/CtxObj.html" title="GemMine::Generator::CtxObj (class)">CtxObj</a></span>
    
  
</p>

  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="DEFAULTS-constant" class="">DEFAULTS =
          
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span>
  <span class='symbol'>:count</span> <span class='op'>=&gt;</span> <span class='int'>100</span><span class='comma'>,</span>
  <span class='symbol'>:root_dir</span> <span class='op'>=&gt;</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_expand_path'>expand_path</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>../../spec/fixtures/gem_mine</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid___dir__'>__dir__</span><span class='rparen'>)</span><span class='comma'>,</span>
  <span class='symbol'>:library_name_prefix</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bench_gem_</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='symbol'>:start_index</span> <span class='op'>=&gt;</span> <span class='int'>1</span><span class='comma'>,</span>
  <span class='symbol'>:group_size</span> <span class='op'>=&gt;</span> <span class='int'>10</span><span class='comma'>,</span>
  <span class='symbol'>:groups_env_prefix</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>GEM_MINE_GROUP_</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='symbol'>:namespace_proc</span> <span class='op'>=&gt;</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='symbol'>:include_floss_funding</span> <span class='op'>=&gt;</span> <span class='kw'>false</span><span class='comma'>,</span>
  <span class='symbol'>:dependencies</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='symbol'>:authors</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='symbol'>:version_strategy</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_proc'>proc</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_ctx'>ctx</span><span class='op'>|</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0.0.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ctx'>ctx</span><span class='lbracket'>[</span><span class='symbol'>:index</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='symbol'>:gemspec_extras</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='symbol'>:yaml_templates</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='symbol'>:file_contents</span> <span class='op'>=&gt;</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='comment'># if nil, a minimal default lib file is generated via ERB
</span>  <span class='symbol'>:overwrite</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='comma'>,</span>
  <span class='symbol'>:cleanup</span> <span class='op'>=&gt;</span> <span class='kw'>false</span><span class='comma'>,</span>
  <span class='symbol'>:seed</span> <span class='op'>=&gt;</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='symbol'>:after_generate</span> <span class='op'>=&gt;</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='symbol'>:progress_bar</span> <span class='op'>=&gt;</span> <span class='kw'>nil</span><span class='comma'>,</span>
<span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="YAML_KEY_SUFFIX-constant" class="">YAML_KEY_SUFFIX =
          
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(.*)_ya?ml\z</span><span class='regexp_end'>/</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="YML_EXT_REGEX-constant" class="">YML_EXT_REGEX =
          
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\.yml\z</span><span class='regexp_end'>/</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="YAML_EXT_REGEX-constant" class="">YAML_EXT_REGEX =
          
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\.yaml\z</span><span class='regexp_end'>/</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
    </dl>
  







  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(options = {})  &#x21d2; Generator </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>A new instance of Generator.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#run-instance_method" title="#run (instance method)">#<strong>run</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(options = {})  &#x21d2; <tt><span class='object_link'><a href="" title="GemMine::Generator (class)">Generator</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns a new instance of Generator.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


35
36
37</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/gem_mine/generator.rb', line 35</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='ivar'>@options</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="#DEFAULTS-constant" title="GemMine::Generator::DEFAULTS (constant)">DEFAULTS</a></span></span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="run-instance_method">
  
    #<strong>run</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/gem_mine/generator.rb', line 39</span>

<span class='kw'>def</span> <span class='id identifier rubyid_run'>run</span>
  <span class='id identifier rubyid_validate!'>validate!</span>
  <span class='id identifier rubyid_srand'>srand</span><span class='lparen'>(</span><span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:seed</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:seed</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_root_dir'>root_dir</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_expand_path'>expand_path</span><span class='lparen'>(</span><span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:root_dir</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_rm_rf'>rm_rf</span><span class='lparen'>(</span><span class='id identifier rubyid_root_dir'>root_dir</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:cleanup</span><span class='rbracket'>]</span>
  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_mkdir_p'>mkdir_p</span><span class='lparen'>(</span><span class='id identifier rubyid_root_dir'>root_dir</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_gems_meta'>gems_meta</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_count'>count</span> <span class='op'>=</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:count</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
  <span class='id identifier rubyid_start_index'>start_index</span> <span class='op'>=</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:start_index</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
  <span class='id identifier rubyid_group_size'>group_size</span> <span class='op'>=</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:group_size</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>

  <span class='comment'># Optional progress bar
</span>  <span class='id identifier rubyid_progress_bar_options'>progress_bar_options</span> <span class='op'>=</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:progress_bar</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_bar'>bar</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_progress_bar_options'>progress_bar_options</span>
    <span class='kw'>begin</span>
      <span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ruby-progressbar</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> <span class='id identifier rubyid_progress_bar_options'>progress_bar_options</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
      <span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:total</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='id identifier rubyid_count'>count</span>
      <span class='id identifier rubyid_bar'>bar</span> <span class='op'>=</span> <span class='const'>ProgressBar</span><span class='period'>.</span><span class='id identifier rubyid_create'>create</span><span class='lparen'>(</span><span class='id identifier rubyid_opts'>opts</span><span class='rparen'>)</span>
    <span class='kw'>rescue</span> <span class='const'>LoadError</span>
      <span class='id identifier rubyid_bar'>bar</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_count'>count</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_offset'>offset</span><span class='op'>|</span>
    <span class='id identifier rubyid_index'>index</span> <span class='op'>=</span> <span class='id identifier rubyid_start_index'>start_index</span> <span class='op'>+</span> <span class='id identifier rubyid_offset'>offset</span>
    <span class='id identifier rubyid_ordinal'>ordinal</span> <span class='op'>=</span> <span class='id identifier rubyid_offset'>offset</span>
    <span class='id identifier rubyid_group_index'>group_index</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_ordinal'>ordinal</span> <span class='op'>/</span> <span class='id identifier rubyid_group_size'>group_size</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_library_name'>library_name</span> <span class='op'>=</span> <span class='id identifier rubyid_format_name'>format_name</span><span class='lparen'>(</span><span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:library_name_prefix</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_index'>index</span><span class='comma'>,</span> <span class='id identifier rubyid_count'>count</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_module_name'>module_name</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Helpers.html" title="GemMine::Helpers (module)">Helpers</a></span></span><span class='period'>.</span><span class='id identifier rubyid_camelize'><span class='object_link'><a href="Helpers.html#camelize-class_method" title="GemMine::Helpers.camelize (method)">camelize</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_library_name'>library_name</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_gem_dir'>gem_dir</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_root_dir'>root_dir</span><span class='comma'>,</span> <span class='id identifier rubyid_library_name'>library_name</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_lib_dir'>lib_dir</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_gem_dir'>gem_dir</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>lib</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_mkdir_p'>mkdir_p</span><span class='lparen'>(</span><span class='id identifier rubyid_lib_dir'>lib_dir</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_env_group_var'>env_group_var</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:groups_env_prefix</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_group_index'>group_index</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>

    <span class='comment'># Build per-gem context used by ERB templates and value callables
</span>    <span class='id identifier rubyid_ctx'>ctx</span> <span class='op'>=</span> <span class='id identifier rubyid_build_context'>build_context</span><span class='lparen'>(</span>
      <span class='symbol'>:index</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_index'>index</span><span class='comma'>,</span>
      <span class='symbol'>:ordinal</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_ordinal'>ordinal</span><span class='comma'>,</span>
      <span class='symbol'>:count</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_count'>count</span><span class='comma'>,</span>
      <span class='symbol'>:group_size</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_group_size'>group_size</span><span class='comma'>,</span>
      <span class='symbol'>:group_index</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_group_index'>group_index</span><span class='comma'>,</span>
      <span class='symbol'>:groups_env_prefix</span> <span class='op'>=&gt;</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:groups_env_prefix</span><span class='rbracket'>]</span><span class='comma'>,</span>
      <span class='symbol'>:env_group_var</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_env_group_var'>env_group_var</span><span class='comma'>,</span>
      <span class='symbol'>:root_dir</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_root_dir'>root_dir</span><span class='comma'>,</span>
      <span class='symbol'>:gem_dir</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_gem_dir'>gem_dir</span><span class='comma'>,</span>
      <span class='symbol'>:lib_dir</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_lib_dir'>lib_dir</span><span class='comma'>,</span>
      <span class='symbol'>:library_name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_library_name'>library_name</span><span class='comma'>,</span>
      <span class='symbol'>:module_name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_module_name'>module_name</span><span class='comma'>,</span>
      <span class='symbol'>:include_floss_funding</span> <span class='op'>=&gt;</span> <span class='op'>!</span><span class='op'>!</span><span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:include_floss_funding</span><span class='rbracket'>]</span>
    <span class='rparen'>)</span>

    <span class='id identifier rubyid_ctx'>ctx</span><span class='lbracket'>[</span><span class='symbol'>:namespace</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_call_opt'>call_opt</span><span class='lparen'>(</span><span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:namespace_proc</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_ctx'>ctx</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_ctx'>ctx</span><span class='lbracket'>[</span><span class='symbol'>:dependencies</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_normalize_dependencies'>normalize_dependencies</span><span class='lparen'>(</span><span class='id identifier rubyid_call_opt'>call_opt</span><span class='lparen'>(</span><span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:dependencies</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_ctx'>ctx</span><span class='rparen'>)</span><span class='rparen'>)</span>

    <span class='comment'># Write Gemfile and gemspec
</span>    <span class='id identifier rubyid_gemfile_path'>gemfile_path</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_gem_dir'>gem_dir</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Gemfile</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_gemspec_path'>gemspec_path</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_gem_dir'>gem_dir</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_library_name'>library_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.gemspec</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

    <span class='id identifier rubyid_write_gemfile'>write_gemfile</span><span class='lparen'>(</span><span class='id identifier rubyid_gemfile_path'>gemfile_path</span><span class='comma'>,</span> <span class='id identifier rubyid_ctx'>ctx</span><span class='lbracket'>[</span><span class='symbol'>:dependencies</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:overwrite</span><span class='rbracket'>]</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_authors'>authors</span> <span class='op'>=</span> <span class='id identifier rubyid_call_opt'>call_opt</span><span class='lparen'>(</span><span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:authors</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_ctx'>ctx</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_version'>version</span> <span class='op'>=</span> <span class='id identifier rubyid_call_opt'>call_opt</span><span class='lparen'>(</span><span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:version_strategy</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_ctx'>ctx</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_extras'>extras</span> <span class='op'>=</span> <span class='id identifier rubyid_symbolize_keys'>symbolize_keys</span><span class='lparen'>(</span><span class='id identifier rubyid_call_opt'>call_opt</span><span class='lparen'>(</span><span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:gemspec_extras</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_ctx'>ctx</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_write_gemspec'>write_gemspec</span><span class='lparen'>(</span><span class='id identifier rubyid_gemspec_path'>gemspec_path</span><span class='comma'>,</span> <span class='id identifier rubyid_library_name'>library_name</span><span class='comma'>,</span> <span class='id identifier rubyid_version'>version</span><span class='comma'>,</span> <span class='id identifier rubyid_authors'>authors</span><span class='comma'>,</span> <span class='id identifier rubyid_extras'>extras</span><span class='comma'>,</span> <span class='id identifier rubyid_ctx'>ctx</span><span class='comma'>,</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:overwrite</span><span class='rbracket'>]</span><span class='rparen'>)</span>

    <span class='comment'># YAML templates
</span>    <span class='id identifier rubyid_yaml_templates'>yaml_templates</span> <span class='op'>=</span> <span class='id identifier rubyid_call_opt'>call_opt</span><span class='lparen'>(</span><span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:yaml_templates</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_ctx'>ctx</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_write_yaml_templates'>write_yaml_templates</span><span class='lparen'>(</span><span class='id identifier rubyid_gem_dir'>gem_dir</span><span class='comma'>,</span> <span class='id identifier rubyid_yaml_templates'>yaml_templates</span><span class='comma'>,</span> <span class='id identifier rubyid_ctx'>ctx</span><span class='comma'>,</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:overwrite</span><span class='rbracket'>]</span><span class='rparen'>)</span>

    <span class='comment'># Files (lib and others)
</span>    <span class='id identifier rubyid_files_templates'>files_templates</span> <span class='op'>=</span> <span class='id identifier rubyid_call_opt'>call_opt</span><span class='lparen'>(</span><span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:file_contents</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_ctx'>ctx</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_files_templates'>files_templates</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_files_templates'>files_templates</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
      <span class='comment'># Provide default minimal lib file rendered via ERB
</span>      <span class='id identifier rubyid_files_templates'>files_templates</span> <span class='op'>=</span> <span class='lbrace'>{</span>
        <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>lib</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_library_name'>library_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.rb</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_default_lib_template'>default_lib_template</span><span class='comma'>,</span>
      <span class='rbrace'>}</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_write_file_templates'>write_file_templates</span><span class='lparen'>(</span><span class='id identifier rubyid_gem_dir'>gem_dir</span><span class='comma'>,</span> <span class='id identifier rubyid_files_templates'>files_templates</span><span class='comma'>,</span> <span class='id identifier rubyid_ctx'>ctx</span><span class='comma'>,</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:overwrite</span><span class='rbracket'>]</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_per_gem'>per_gem</span> <span class='op'>=</span> <span class='lbrace'>{</span>
      <span class='symbol'>:index</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_index'>index</span><span class='comma'>,</span>
      <span class='symbol'>:library_name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_library_name'>library_name</span><span class='comma'>,</span>
      <span class='symbol'>:module_name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_module_name'>module_name</span><span class='comma'>,</span>
      <span class='symbol'>:namespace</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_ctx'>ctx</span><span class='lbracket'>[</span><span class='symbol'>:namespace</span><span class='rbracket'>]</span><span class='comma'>,</span>
      <span class='symbol'>:group_index</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_group_index'>group_index</span><span class='comma'>,</span>
      <span class='symbol'>:env_group_var</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_env_group_var'>env_group_var</span><span class='comma'>,</span>
      <span class='symbol'>:dir</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_gem_dir'>gem_dir</span><span class='comma'>,</span>
      <span class='symbol'>:lib_dir</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_lib_dir'>lib_dir</span><span class='comma'>,</span>
      <span class='symbol'>:gemspec_path</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_gemspec_path'>gemspec_path</span><span class='comma'>,</span>
      <span class='symbol'>:gemfile_path</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_gemfile_path'>gemfile_path</span><span class='comma'>,</span>
    <span class='rbrace'>}</span>

    <span class='id identifier rubyid_gems_meta'>gems_meta</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_per_gem'>per_gem</span>

    <span class='kw'>if</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:after_generate</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:call</span><span class='rparen'>)</span>
      <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:after_generate</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='symbol'>:result</span> <span class='op'>=&gt;</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='symbol'>:gem</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_per_gem'>per_gem</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_bar'>bar</span><span class='op'>&amp;.</span><span class='id identifier rubyid_increment'>increment</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_bar'>bar</span><span class='op'>&amp;.</span><span class='id identifier rubyid_finish'>finish</span> <span class='kw'>if</span> <span class='id identifier rubyid_bar'>bar</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_bar'>bar</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:finish</span><span class='rparen'>)</span>

  <span class='lbrace'>{</span>
    <span class='symbol'>:root_dir</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_root_dir'>root_dir</span><span class='comma'>,</span>
    <span class='symbol'>:groups</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span> <span class='symbol'>:env_prefix</span> <span class='op'>=&gt;</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:groups_env_prefix</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:group_size</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_group_size'>group_size</span> <span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='symbol'>:gems</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_gems_meta'>gems_meta</span><span class='comma'>,</span>
  <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Sun Aug 17 20:16:37 2025 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.37 (ruby-3.4.5).
</div>

    </div>
  </body>
</html>