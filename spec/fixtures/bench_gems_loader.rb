# frozen_string_literal: true

# Loader for 100 reusable benchmark fixture gems generated by GemMine
# that exist on disk under spec/fixtures/gem_mine/bench_gem_XX with minimal gem structure.
#
# Each gem folder contains:
#   - Gemfile
#   - bench_gem_XX.gemspec
#   - one or more YAML files (optional)
#   - lib/bench_gem_XX.rb (defines BenchGemXX::Core and may conditionally include Poke)
#
# ENV segmentation (implemented inside each gem's lib file) uses groups:
#   - GEM_MINE_GROUP_0 .. GEM_MINE_GROUP_9 (10 per group when count=100, group_size=10)

base_dir = File.expand_path("gem_mine", __dir__)

(1..100).each do |i|
  dir = format("bench_gem_%02d", i)
  lib_file = File.join(base_dir, dir, "lib", format("bench_gem_%02d.rb", i))
  # Use load (not require) to allow reloading across tests when ENV changes
  load(lib_file) if File.exist?(lib_file)
end
